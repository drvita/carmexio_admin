import{u as c}from"./useStorage.bacf4001.js";import{N as p}from"./entry.2c6d6405.js";const l=p();class h{static __initStatic(){this.host=l.public.API_BASE}}h.__initStatic();class o{constructor(){o.prototype.__init.call(this),o.prototype.__init2.call(this),o.prototype.__init3.call(this),o.prototype.__init4.call(this)}__init(){this.method=""}__init2(){this.path=""}__init3(){this.body={}}__init4(){this.params={}}async request(){const e=c().getToken(),s={method:this.method,headers:{"Content-Type":"application/json",Accept:"application/json"}},a=new URL(h.host+"/api/v1/"+this.path);if(this.method!=="GET"&&(s.body=JSON.stringify(this.body)),e&&(s.headers.Authorization=`Bearer ${e}`),this.params){const t=Object.keys(this.params);for(let i=0;i<t.length;i++){const n=t[i];a.searchParams.append(n,this.params[`${n}`])}}return console.log("[APIv1] Request:",a.pathname),await fetch(a,s).then(t=>t.status!==204&&t.json()).then(t=>({type:"server ok",response:t})).catch(t=>({type:"server error",message:t.message}))}randString(r){let e="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.#_-",a=s.length;let t=0;for(;t<r;)e+=s.charAt(Math.floor(Math.random()*a)),t+=1;return e}}export{o as A};
