import{n as m,C as p,s as f,_ as b,k as g,m as t,t as l,H as u,I as c,l as h,z as y}from"./entry.454c48d4.js";import{L as w}from"./loginHlp.548428f3.js";import{u as k}from"./useToast.25e6c600.js";import{_ as x}from"./_plugin-vue_export-helper.c27b6911.js";import"./useStorage.12f764f9.js";import"./apiV1.3869396f.js";const _={data(){return{email:"",password:"",loading:!1}},methods:{async handleLogin(a){a.preventDefault();const e=new w,d={email:this.email,password:this.password},n=this.validation,{toast_error:r,toast_warning:o}=k();if(!n.status){console.error("[Login] Validacion fallo"),o(n.message,"top-end");return}this.loading=!0,e.login(d).then(s=>{if(s.data&&s.token)return console.log("[Login] Login complete"),m("/dashboard")}).catch(s=>{if(console.error("[Login] login failer:",s.message),r(this.$t(s.message),"top-end"),s.message==="unverified email"){setTimeout(()=>{m("email/verifyRequest?email="+this.email)},3500);return}this.email="",this.password="",this.loading=!1})}},computed:{validation(){const a=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,e={status:!0,message:""};return a.test(this.email)?(this.password.length<8&&(e.status=!1,e.message=this.$t("Please, type password valid")),e):(e.status=!1,e.message=this.$t("Please, type e-mail valid"),e)},btnDisabled(){return this.loading||!this.validation.status}},mounted(){console.log("[Login] Mounted form login")}},v={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"},L={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},D={class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"},V={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},$={for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},B=["disabled"],S={key:0,class:"text-white text-sm text-right pr-2"};function T(a,e,d,n,r,o){const s=b;return g(),p(s,{name:"login"},{default:f(()=>[t("div",v,[t("div",L,[t("h1",D,l(a.$t("Sign in to your account")),1),t("form",{class:"space-y-4 md:space-y-6",action:"#",onSubmit:e[2]||(e[2]=(...i)=>o.handleLogin&&o.handleLogin(...i))},[t("div",null,[t("label",V,l(a.$t("Your email")),1),u(t("input",{type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com","onUpdate:modelValue":e[0]||(e[0]=i=>r.email=i)},null,512),[[c,r.email]])]),t("div",null,[t("label",$,l(a.$t("Password")),1),u(t("input",{type:"password",name:"password",id:"password",placeholder:"••••••••",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":e[1]||(e[1]=i=>r.password=i)},null,512),[[c,r.password]])]),t("button",{type:"submit",disabled:o.btnDisabled,class:"w-full text-white bg-primary-500 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 disabled:opacity-30 disabled:bg-primary-900"},l(a.$t("Sign in")),9,B),r.loading?(g(),h("p",S,l(a.$t("Loading"))+" ... ",1)):y("",!0)],32)])])]),_:1})}const q=x(_,[["render",T]]);export{q as default};
