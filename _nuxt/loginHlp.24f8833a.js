import{u as c}from"./useStorage.b4f7786c.js";import{A as p}from"./apiV1.4489ec2e.js";function i(r){let s,o=r[0],t=1;for(;t<r.length;){const e=r[t],n=r[t+1];if(t+=2,(e==="optionalAccess"||e==="optionalCall")&&o==null)return;e==="access"||e==="optionalAccess"?(s=o,o=n(o)):(e==="call"||e==="optionalCall")&&(o=n((...l)=>o.call(s,...l)),s=void 0)}return o}const a=c();class f extends p{async login(s){return!s||typeof s!="object"||!s.email||!s.password?Promise.resolve().then(()=>({})):(this.method="POST",this.path="admins/login",this.body=s,new Promise(async(o,t)=>await this.request().then(e=>{if(e.type==="server error"||i([e,"access",n=>n.response,"optionalAccess",n=>n.errors]))return t(e.response);a.setSession(e.response),o(e.response)})))}async logout(){return this.method="POST",this.path="admins/logout",this.body={},new Promise(async(s,o)=>await this.request().then(t=>{if(t.type==="server error"||i([t,"access",e=>e.response,"optionalAccess",e=>e.errors]))return o(t.response);a.deleteSession(),s(t.response)}))}}export{f as L};
