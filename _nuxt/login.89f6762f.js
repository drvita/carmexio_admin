import{n as d,C as g,s as c,u as f,_ as h,k as w,m as e,t as i,H as m,I as u}from"./entry.7e45b807.js";import{L as y}from"./loginHlp.b847a643.js";import{_ as b}from"./_plugin-vue_export-helper.c27b6911.js";import"./useStorage.6e19b9e8.js";import"./apiV1.6105319e.js";const x={data(){return{email:"",password:"",swal:null}},methods:{async handleLogin(t){t.preventDefault();const r=new y,n={email:this.email,password:this.password};if(!this.validation){console.error("[Login] Validacion fallo");return}r.login(n).then(o=>{if(o.data&&o.token)return console.log("[Login] Login complete"),d("/dashboard")}).catch(o=>{if(console.error("[Login] login failer:",o.message),o.message==="unverified email"){d("email/verifyRequest?email="+this.email);return}this.swal.fire({icon:"error",position:"top-end",text:this.$t(o.message),showConfirmButton:!1,timer:2500,toast:!0}),this.email="",this.password=""})}},computed:{validation(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.password.length<8?(this.swal.fire({icon:"warning",position:"top-end",text:this.$t("Please, type password valid"),showConfirmButton:!1,timer:2500,toast:!0}),!1):!0:(this.swal.fire({icon:"warning",position:"top-end",text:this.$t("Please, type e-mail valid"),showConfirmButton:!1,timer:2500,toast:!0}),!1)}},mounted(){const{$swal:t}=f();this.swal=t,console.log("[Login] Mounted form login")}},k={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"},_={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},v={class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"},L={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},$={for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},B={type:"submit",class:"w-full text-white bg-primary-500 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"};function C(t,r,n,o,s,l){const p=h;return w(),g(p,{name:"login"},{default:c(()=>[e("div",k,[e("div",_,[e("h1",v,i(t.$t("Sign in to your account")),1),e("form",{class:"space-y-4 md:space-y-6",action:"#",onSubmit:r[2]||(r[2]=(...a)=>l.handleLogin&&l.handleLogin(...a))},[e("div",null,[e("label",L,i(t.$t("Your email")),1),m(e("input",{type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com","onUpdate:modelValue":r[0]||(r[0]=a=>s.email=a)},null,512),[[u,s.email]])]),e("div",null,[e("label",$,i(t.$t("Password")),1),m(e("input",{type:"password",name:"password",id:"password",placeholder:"••••••••",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":r[1]||(r[1]=a=>s.password=a)},null,512),[[u,s.password]])]),e("button",B,i(t.$t("Sign in")),1)],32)])])]),_:1})}const E=b(x,[["render",C]]);export{E as default};
