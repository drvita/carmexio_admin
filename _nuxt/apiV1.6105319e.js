import{u as c}from"./useStorage.6e19b9e8.js";import{N as p}from"./entry.7e45b807.js";const l=p();class h{static __initStatic(){this.host=l.public.API_URL}}h.__initStatic();class o{constructor(){o.prototype.__init.call(this),o.prototype.__init2.call(this),o.prototype.__init3.call(this),o.prototype.__init4.call(this)}__init(){this.method=""}__init2(){this.path=""}__init3(){this.body={}}__init4(){this.params={}}async request(){const e=c().getToken(),s={method:this.method,headers:{"Content-Type":"application/json",Accept:"application/json"}},a=new URL(h.host+"/api/v1/"+this.path);if(this.method!=="GET"&&(s.body=JSON.stringify(this.body)),e&&(s.headers.Authorization=`Bearer ${e}`),this.params){const t=Object.keys(this.params);for(let i=0;i<t.length;i++){const r=t[i];a.searchParams.append(r,this.params[`${r}`])}}return console.log("[APIv1] Request:",a.pathname),await fetch(a,s).then(async t=>{if(t.status!==204){if(t.status>=400)throw await t.json();return t.json()}}).then(t=>({type:"server ok",response:t})).catch(t=>({...t,type:"server error"}))}randString(n){let e="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.#_-",a=s.length;let t=0;for(;t<n;)e+=s.charAt(Math.floor(Math.random()*a)),t+=1;return e}}export{o as A};
