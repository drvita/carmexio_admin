import{r as d}from"./entry.00d7b0bf.js";function g(o){let s,t=o[0],a=1;for(;a<o.length;){const n=o[a],c=o[a+1];if(a+=2,(n==="optionalAccess"||n==="optionalCall")&&t==null)return;n==="access"||n==="optionalAccess"?(s=t,t=c(t)):(n==="call"||n==="optionalCall")&&(t=c((...r)=>t.call(s,...r)),s=void 0)}return t}const v=()=>{const o="carmexio",s={token:"",data:{}},t=localStorage.getItem(o),a=d(t?JSON.parse(t):s),n=e=>{localStorage.setItem(o,JSON.stringify(e)),a.value=e};return{setSession:n,deleteSession:async()=>{const e=a.value;e.token="",e.data={},n(e)},getToken:()=>a.value.token,getUser:()=>{const{data:e}=a.value;return e},hasRole:(e="")=>{const{data:i}=a.value;return!!g([i,"access",l=>l.roles,"optionalAccess",l=>l.find,"call",l=>l(u=>u.name===e)])}}};export{v as u};
